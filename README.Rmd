---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# btmembers

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
<!-- badges: end -->

The Bundestag distributes [biographical and election data](https://www.bundestag.de/services/opendata/) on all its members since 1949. This data, however, can be difficult to work with because XML files store information in an arbitrary number of dimensions. btmembers downloads the file "Stammdaten aller Abgeordneten seit 1949 im XML-Format" from the Bundestag website and converts it either to (a) four data frames nested into a list (retaining all the information of the original XML file) or (b) a single, condensed data frame.

## Installation

You can install the development version from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("jolyphil/btmembers")
```
## Usage

btmembers exports a single function: `import_members()`. By default, this function returns a list containing four data frames (`namen`, `bio`, `wp`, and `inst`), which together preserve all the information contained in the XML file provided by the Bundestag. 

```{r import}
library(btmembers)
members <- import_members()
summary(members)
```

```{r n-members, include = FALSE}
n_members <- function(df) {
  length(unique(df$id)) 
}
```

The data frame `namen` contains data on `r nrow(members$namen)` names from `r n_members(members$namen)` members of the Bundestag:

```{r namen}
summary(members$namen)
```

The data frame `bio` contains `r nrow(members$bio)` biographical entries from `r n_members(members$bio)` members of the Bundestag:

```{r bio}
members$bio
```

The data frame `wp` contains data on `r nrow(members$wp)` parliamentary terms from `r n_members(members$bio)` members of the Bundestag:

```{r wp}
members$wp
```

The data frame `inst` contains `r nrow(members$inst)` records on institutional membership from `r n_members(members$bio)` members of the Bundestag:

```{r inst}
members$inst
```


What is special about using `README.Rmd` instead of just `README.md`? You can include R chunks like so:

```{r cars}
summary(cars)
```

You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date. `devtools::build_readme()` is handy for this. You could also use GitHub Actions to re-render `README.Rmd` every time you push. An example workflow can be found here: <https://github.com/r-lib/actions/tree/master/examples>.

You can also embed plots, for example:

```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub and CRAN.
